<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Résultats - Hauts de Flandre Natation</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .csv-table {
      border-collapse: collapse;
      width: 80%;
      max-width: 800px;
      margin: 2em auto;
      background-color: #f9f9f9;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }

    .csv-table th, .csv-table td {
      border: 1px solid #ccc;
      padding: 12px 15px;
      text-align: left;
    }

    .csv-table th {
      background-color: #0057b8;
      color: white;
    }

    .csv-table tr:nth-child(even) {
      background-color: #e6f0fa;
    }

    .csv-table tr:hover {
      background-color: #d0e4ff;
    }

    h2 {
      text-align: center;
      margin-top: 2em;
    }
  </style>
</head>
<body>

<div id="header"></div>

<main>
  <h2>Résultats du club</h2>
  <div id="tableContainer">Chargement des résultats...</div>
</main>

<div id="footer"></div>

<script>
fetch('data/resultats_csv_90111.csv')
  .then(response => response.text())
  .then(text => {
    const lines = text.replace(/\r/g,'').split('\n');
    const headers = lines[0].split(';').map(h => h.trim());

    // Récupération des données
    const data = lines.slice(1).filter(l => l.trim() !== '').map(line => line.split(';').map(c => c.trim()));

    // Création du tableau
    let table = '<table id="resultsTable" class="csv-table"><thead><tr>';
    headers.forEach((header, i) => {
      // Crée un select pour filtrer
      const uniqueValues = [...new Set(data.map(row => row[i]))].sort();
      let selectHTML = `<select class="colFilter" data-col="${i}"><option value="">Tous</option>`;
      uniqueValues.forEach(val => selectHTML += `<option value="${val}">${val}</option>`);
      selectHTML += `</select>`;
      table += `<th>${header}<br>${selectHTML}</th>`;
    });
    table += '</tr></thead><tbody>';
    
    data.forEach(row => {
      table += '<tr>';
      row.forEach(cell => table += `<td>${cell}</td>`);
      table += '</tr>';
    });
    
    table += '</tbody></table>';
    document.getElementById('tableContainer').innerHTML = table;

    // Filtrage par select
    const filters = table.querySelectorAll('.colFilter');
    filters.forEach(select => {
      select.addEventListener('change', () => {
        const rows = document.querySelectorAll('#resultsTable tbody tr');
        rows.forEach(row => {
          let show = true;
          filters.forEach(f => {
            const col = f.dataset.col;
            const val = f.value;
            if (val && row.cells[col].textContent !== val) show = false;
          });
          row.style.display = show ? '' : 'none';
        });
      });
    });
  })
  .catch(err => console.error(err));
</script>
</body>
</html>


</body>
</html>
